!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["@meom/block-components"]=t():e["@meom/block-components"]=t()}(globalThis,(()=>(()=>{"use strict";var e={d:(t,o)=>{for(var n in o)e.o(o,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:o[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{ImageSelect:()=>y,PostSelect:()=>_,TermSelect:()=>v,VideoSelect:()=>k});const o=window.React,n=window.wp.i18n,l=window.wp.components,a=window.wp.blockEditor,r=window.wp.data,c=window.wp.coreData,m=(0,n.__)("Media","meom-block-components"),i=(0,n.__)("Replace Image","meom-block-components"),s=(0,n.__)("Remove Image","meom-block-components"),u=(0,n.__)("Add Image","meom-block-components"),d=e=>{const{onSelect:t,onRemove:n,isOptional:d=!0,id:p}=e,b=!!p,{media:g}=function(e){return(0,r.useSelect)((t=>{const{getMedia:o,isResolving:n,hasFinishedResolution:l}=t(c.store),a=[e,{context:"view"}];return{media:o(...a),isResolvingMedia:n("getMedia",a),hasResolvedMedia:l("getMedia",a)}}),[e])}(p);return(0,o.createElement)(a.BlockControls,null,(0,o.createElement)(l.ToolbarGroup,{label:m},b?(0,o.createElement)(o.Fragment,null,(0,o.createElement)(a.MediaReplaceFlow,{mediaUrl:g?.source_url,onSelect:t,name:i}),!!d&&(0,o.createElement)(l.ToolbarButton,{onClick:n},s)):(0,o.createElement)(a.MediaUploadCheck,null,(0,o.createElement)(a.MediaUpload,{onSelect:t,render:({open:e})=>(0,o.createElement)(l.ToolbarButton,{onClick:e},u)}))))},p=(0,n.__)("Image settings","meom-block-components"),b=(0,n.__)("Image focalpoint","meom-block-components"),g=(0,n.__)("Pick image focalpoint which is central point of the image.","meom-block-components"),E=(0,n.__)("Remove Image","meom-block-components"),y=function(e){const{image:t,onChange:n,settingsText:r=p,showRemoveImageButton:c=!0,buttonText:m=E,useFocalPoint:i=!1,useMediaToolbar:s=!0,focalPointLabel:u=b,focalPointHelp:y=g,focalPoint:_={x:.5,y:.5},onChangeFocalPoint:v,...f}=e,h=t&&t.id,w=t&&t.url;if(i){const e={objectFit:"cover",objectPosition:`${100*_.x}% ${100*_.y}%`};f.style={...f.style,...e}}return(0,o.createElement)(o.Fragment,null,h?(0,o.createElement)(o.Fragment,null,i&&(0,o.createElement)(a.InspectorControls,null,(0,o.createElement)(l.PanelBody,{title:r},(0,o.createElement)(l.FocalPointPicker,{label:u,help:y,url:w,value:_,onChange:v}))),s&&(0,o.createElement)(d,{id:h,onSelect:({id:e,url:t})=>{n({id:e,url:t})},onRemove:()=>{n(null)}}),(0,o.createElement)("img",{src:w,alt:"",...f}),c&&(0,o.createElement)(l.Button,{className:"meom-media-button button button-large",onClick:()=>n(null)},m)):(0,o.createElement)(a.MediaPlaceholder,{onSelect:({id:e,url:t})=>{n({id:e,url:t})},allowedTypes:["image"]}))},_=function(e){const{attributes:{postId:t},postTypeName:a,queryArgs:r={per_page:99},queryOptions:m={enabled:!0},setAttributes:i}=e,s=[],{records:u,isResolving:d}=(0,c.useEntityRecords)("postType",a,r,m);return s.push({value:0,label:(0,n.__)("No post selected","meom-block-components")}),!d&&u&&u.length>0&&u.forEach((e=>{s.push({value:e.id,label:e.title.raw})})),(0,o.createElement)(o.Fragment,null,d&&(0,o.createElement)(l.Spinner,null),!d&&(0,o.createElement)(o.Fragment,null,(0,o.createElement)(l.SelectControl,{label:(0,n.__)("Choose post","meom-block-components"),options:s,onChange:e=>{i({postId:e})},value:t})))},v=function(e){const{attributes:{termId:t},taxonomyName:a,queryArgs:r={per_page:99},queryOptions:m={enabled:!0},setAttributes:i}=e,s=[],{records:u,isResolving:d}=(0,c.useEntityRecords)("taxonomy",a,r,m);return s.push({value:0,label:(0,n.__)("From all categories","meom-block-components")}),!d&&u&&u.length>0&&u.forEach((e=>{s.push({value:e.id,label:e.name})})),(0,o.createElement)(o.Fragment,null,d&&(0,o.createElement)(l.Spinner,null),!d&&(0,o.createElement)(o.Fragment,null,(0,o.createElement)(l.SelectControl,{label:(0,n.__)("Choose category","meom-block-components"),options:s,onChange:e=>{i({termId:e})},value:t})))},f=(0,n.__)("Remove Video","meom-block-components"),h={autoPlay:!0,muted:!0,loop:!0},w="video/mp4",k=function(e){const{video:t,onChange:n,buttonText:r=f,videoAttributes:c=h,videoType:m=w}=e,i=t&&t.id,s=t&&t.url;return(0,o.createElement)(o.Fragment,null,i?(0,o.createElement)(o.Fragment,null,(0,o.createElement)("video",{...c},(0,o.createElement)("source",{src:s,type:m})),(0,o.createElement)(l.Button,{className:"meom-media-button button button-large",onClick:()=>n(null)},r)):(0,o.createElement)(a.MediaPlaceholder,{onSelect:({id:e,url:t})=>{n({id:e,url:t})},allowedTypes:["video"]}))};return t})()));