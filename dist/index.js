!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["@meom/block-components"]=t():e["@meom/block-components"]=t()}(self,(function(){return function(){"use strict";var e={d:function(t,o){for(var n in o)e.o(o,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:o[n]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r:function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},o.apply(this,arguments)}e.r(t),e.d(t,{ImageSelect:function(){return v},PostSelect:function(){return E},TermSelect:function(){return h},VideoSelect:function(){return S}});var n=window.wp.element,l=window.wp.i18n,r=window.wp.components,a=window.wp.blockEditor,c=window.wp.data,i=window.wp.coreData;const m=(0,l.__)("Media","meom-block-components"),u=(0,l.__)("Replace Image","meom-block-components"),s=(0,l.__)("Remove Image","meom-block-components"),d=(0,l.__)("Add Image","meom-block-components"),p=e=>{const{onSelect:t,onRemove:o,isOptional:l=!0,id:p}=e,b=!!p,{media:g}=function(e){return(0,c.useSelect)((t=>{const{getMedia:o,isResolving:n,hasFinishedResolution:l}=t(i.store),r=[e,{context:"view"}];return{media:o(...r),isResolvingMedia:n("getMedia",r),hasResolvedMedia:l("getMedia",r)}}),[e])}(p);return(0,n.createElement)(a.BlockControls,null,(0,n.createElement)(r.ToolbarGroup,{label:m},b?(0,n.createElement)(n.Fragment,null,(0,n.createElement)(a.MediaReplaceFlow,{mediaUrl:g?.source_url,onSelect:t,name:u}),!!l&&(0,n.createElement)(r.ToolbarButton,{onClick:o},s)):(0,n.createElement)(a.MediaUploadCheck,null,(0,n.createElement)(a.MediaUpload,{onSelect:t,render:e=>{let{open:t}=e;return(0,n.createElement)(r.ToolbarButton,{onClick:t},d)}}))))},b=(0,l.__)("Image settings","meom-block-components"),g=(0,l.__)("Image focalpoint","meom-block-components"),f=(0,l.__)("Pick image focalpoint which is central point of the image.","meom-block-components"),y=(0,l.__)("Remove Image","meom-block-components");var v=function(e){const{image:t,onChange:l,settingsText:c=b,showRemoveImageButton:i=!0,buttonText:m=y,useFocalPoint:u=!1,useMediaToolbar:s=!0,focalPointLabel:d=g,focalPointHelp:v=f,focalPoint:E={x:.5,y:.5},onChangeFocalPoint:h,..._}=e,w=t&&t.id,k=t&&t.url;if(u){const e={objectFit:"cover",objectPosition:`${100*E.x}% ${100*E.y}%`};_.style={..._.style,...e}}return(0,n.createElement)(n.Fragment,null,w?(0,n.createElement)(n.Fragment,null,u&&(0,n.createElement)(a.InspectorControls,null,(0,n.createElement)(r.PanelBody,{title:c},(0,n.createElement)(r.FocalPointPicker,{label:d,help:v,url:k,value:E,onChange:h}))),s&&(0,n.createElement)(p,{id:w,onSelect:e=>{let{id:t,url:o}=e;l({id:t,url:o})},onRemove:()=>{l(null)}}),(0,n.createElement)("img",o({src:k,alt:""},_)),i&&(0,n.createElement)(r.Button,{className:"meom-media-button button button-large",onClick:()=>l(null)},m)):(0,n.createElement)(a.MediaPlaceholder,{onSelect:e=>{let{id:t,url:o}=e;l({id:t,url:o})},allowedTypes:["image"]}))},E=function(e){const{attributes:{postId:t},postTypeName:o,queryArgs:a={per_page:99},queryOptions:c={enabled:!0},setAttributes:m}=e,u=[],{records:s,isResolving:d}=(0,i.useEntityRecords)("postType",o,a,c);return u.push({value:0,label:(0,l.__)("No post selected","meom-block-components")}),!d&&s&&s.length>0&&s.forEach((e=>{u.push({value:e.id,label:e.title.raw})})),(0,n.createElement)(n.Fragment,null,d&&(0,n.createElement)(r.Spinner,null),!d&&(0,n.createElement)(n.Fragment,null,(0,n.createElement)(r.SelectControl,{label:(0,l.__)("Choose post","meom-block-components"),options:u,onChange:e=>{m({postId:e})},value:t})))},h=function(e){const{attributes:{termId:t},taxonomyName:o,queryArgs:a={per_page:99},queryOptions:c={enabled:!0},setAttributes:m}=e,u=[],{records:s,isResolving:d}=(0,i.useEntityRecords)("taxonomy",o,a,c);return u.push({value:0,label:(0,l.__)("From all categories","meom-block-components")}),!d&&s&&s.length>0&&s.forEach((e=>{u.push({value:e.id,label:e.name})})),(0,n.createElement)(n.Fragment,null,d&&(0,n.createElement)(r.Spinner,null),!d&&(0,n.createElement)(n.Fragment,null,(0,n.createElement)(r.SelectControl,{label:(0,l.__)("Choose category","meom-block-components"),options:u,onChange:e=>{m({termId:e})},value:t})))};const _=(0,l.__)("Remove Video","meom-block-components"),w={autoPlay:!0,muted:!0,loop:!0},k="video/mp4";var S=function(e){const{video:t,onChange:o,buttonText:l=_,videoAttributes:c=w,videoType:i=k}=e,m=t&&t.id,u=t&&t.url;return(0,n.createElement)(n.Fragment,null,m?(0,n.createElement)(n.Fragment,null,(0,n.createElement)("video",c,(0,n.createElement)("source",{src:u,type:i})),(0,n.createElement)(r.Button,{className:"meom-media-button button button-large",onClick:()=>o(null)},l)):(0,n.createElement)(a.MediaPlaceholder,{onSelect:e=>{let{id:t,url:n}=e;o({id:t,url:n})},allowedTypes:["video"]}))};return t}()}));